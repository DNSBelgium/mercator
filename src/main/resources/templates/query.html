<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">
<head>
    <title>Mercator | Home </title>
</head>

<body >

<div layout:fragment="content">
    <h2>Run a query</h2>

    <form method="get" th:action="@{/run_query}">
        <label>
            Query:
            <textarea name="query"  th:value="${query}" th:text="${query}">

            </textarea>
        </label>

        <label>
            Max Rows:
            <input type="number" name="maxRows" th:value="${maxRows}">
        </label>

        <label>
            <input th:type="submit" value="Submit">
        </label>

    </form>

    <div th:if="error" th:text="${error}">
    </div>
    <div th:if="${rowsFound == 0}">
        No rows found.
    </div>

    <div>Rows found : <span th:text="${rowsFound}"></span> </div>

<!--    <ul th:each="col : ${columns}">-->
<!--        <li th:text="${col}"></li>-->
<!--    </ul>-->

    <table th:if="${rowsFound >= 0}">
        <thead>
            <tr>
                <td th:each="col : ${columns}" th:text="${col}"></td>
            </tr>
        </thead>
        <tbody>
            <tr th:each="row : ${rows}">
<!--                <td th:text="${row}"></td>-->

                <th:block th:each="col : ${columns}">
                    <td th:text="${row.get(col)}"></td>
                </th:block>

            </tr>
        </tbody>
    </table>

    <!--        <p>-->
    <!--            <a th:href="@{/status}"> Check the crawling status </a>-->
    <!--        </p>-->

    <!--        <p>-->
    <!--            <a th:href="@{/hello}"> Test visualisation of a visit (fake data for now) </a>-->
    <!--        </p>-->

    <!--        <p>-->
    <!--            <a th:href="@{/test-htmx}"> Experiment with htmx </a>-->
    <!--        </p>-->

    <!--        <p>-->
    <!--            <a target="_blank" th:href="@{/actuator/scheduledtasks}">/actuator/scheduledtasks</a>-->
    <!--        </p>-->
    <!--        <p>-->
    <!--            <a target="_blank" th:href="@{/actuator/threaddump}">/actuator/threaddump</a>-->
    <!--        </p>-->

</div>

<th:block layout:fragment="page-scripts">
    <!-- Add additional scripts there that are only needed for this page (Application wide scripts should be added in layout/layout.html) -->
</th:block>

</body>
</html>
