<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">
<head>
    <title>Mercator | Home </title>
    <script>
        function search(moduleType) {
            const domainName = document.getElementById('textinput').value;
            const fetchLatest = document.getElementById('fetchLatest').checked;
            window.location.href = `/search/${moduleType}/${fetchLatest ? 'latest' : 'ids'}?domainName=${domainName}`;
        }
    </script>
</head>

<body >

<div layout:fragment="content">
<!--    <h2>Welcome to Mercator</h2>-->

    <h2>Search for crawl results</h2>

<!--    <p>-->
<!--        Search <a href="@{/search/dns}">DNS crawls</a>-->
<!--    </p>-->
<!--    <p>-->
<!--        Search <a th:href="@{/search/web}">web crawls</a>-->
<!--    </p>-->
<!--    <p>-->
<!--        Search <a th:href="@{/search/tls}">TLS crawls</a>-->
<!--    </p>-->
<!--    <p>-->
<!--        Search <a th:href="@{/search/smtp}">SMTP crawls</a>-->
<!--    </p>-->

<!--    <p>-->
<!--        <a th:href="@{/query}">Query</a>-->
<!--    </p>-->


    <!--        <p>-->
    <!--            <a th:href="@{/status}"> Check the crawling status </a>-->
    <!--        </p>-->

    <!--        <p>-->
    <!--            <a th:href="@{/hello}"> Test visualisation of a visit (fake data for now) </a>-->
    <!--        </p>-->

    <!--        <p>-->
    <!--            <a th:href="@{/test-htmx}"> Experiment with htmx </a>-->
    <!--        </p>-->

    <!--        <p>-->
    <!--            <a target="_blank" th:href="@{/actuator/scheduledtasks}">/actuator/scheduledtasks</a>-->
    <!--        </p>-->
    <!--        <p>-->
    <!--            <a target="_blank" th:href="@{/actuator/threaddump}">/actuator/threaddump</a>-->
    <!--        </p>-->

    <div>
        <label for="textinput">Domain Name:</label>
        <input id="textinput" name="domainName" type="text">
    </div>

    <button type="button" onclick="search('tls')">TLS</button>
    <button type="button" onclick="search('smtp')">SMTP</button>
    <button type="button" onclick="search('web')">WEB</button>
    <button type="button" onclick="search('dns')">DNS</button>

    <label>
        <input type="checkbox" id="fetchLatest" th:checked="true">
        Fetch Latest
    </label>

</div>

<th:block layout:fragment="page-scripts">
    <!-- Add additional scripts there that are only needed for this page (Application wide scripts should be added in layout/layout.html) -->
</th:block>

</body>
</html>